; PlatformIO Project Configuration File for ESP32-Simple-Thermostat Backport
;
; This is a backported version optimized for ESP32-WROOM DevKit v1
; Removes advanced hardware features while retaining all software improvements

[env:esp32dev]
platform = espressif32@^6.6.0
board = esp32dev
board_build.mcu = esp32
board_build.flash_size = 4MB
board_build.partitions = default.csv
board_build.filesystem = littlefs
framework = arduino

; Library dependencies (same as advanced version)
lib_deps = 
	WiFi
	Preferences
	adafruit/Adafruit AHTX0@^2.0.5
	adafruit/Adafruit Unified Sensor@^1.1.4
	paulstoffregen/OneWire@^2.3.7
	milesburton/DallasTemperature@^3.11.0
	bodmer/TFT_eSPI@^2.5.43
	me-no-dev/AsyncTCP@^1.1.1
	me-no-dev/ESPAsyncWebServer@^1.2.3
	knolleary/PubSubClient@^2.8
	bblanchon/ArduinoJson@^6.21.3

lib_ignore = 
	AsyncTCP_RP2040W

monitor_speed = 115200
monitor_port = /dev/ttyUSB0
upload_port = /dev/ttyUSB0

; Build flags optimized for ESP32-WROOM with basic hardware
build_flags = 
    -w
    -Wno-unused-variable
    -Wno-unused-function
    -Wno-unused-but-set-variable
    -Wno-sign-compare
    
    ; TFT_eSPI configuration for ESP32-WROOM DevKit v1
    ; Standard pin layout compatible with most ESP32 boards
    -DUSER_SETUP_LOADED=1
    -DILI9341_DRIVER=1
    
    ; Display pins (SPI)
    -DTFT_MISO=19
    -DTFT_MOSI=23
    -DTFT_SCLK=18
    -DTFT_CS=5
    -DTFT_DC=2
    -DTFT_RST=4
    -DTFT_BL=15
    
    ; Touch pins (separate from I2C to avoid conflicts)
    -DTOUCH_CS=21
    -DTOUCH_IRQ=22
    
    ; Font support
    -DLOAD_GLCD=1
    -DLOAD_FONT2=1
    -DLOAD_FONT4=1
    -DLOAD_FONT6=1
    -DLOAD_FONT7=1
    -DLOAD_FONT8=1
    -DLOAD_GFXFF=1
    -DSMOOTH_FONT=1
    
    ; SPI speeds
    -DSPI_FREQUENCY=27000000
    -DSPI_READ_FREQUENCY=6000000
    -DSPI_TOUCH_FREQUENCY=2500000

; Suppress compiler warnings
build_unflags = 
    -Wall
    -Wextra